<div class="h-screen p-4 w-full box-border">
  <p-card header="ðŸ’¬ Chatbot Cliente" class="shadow-2">
    
    <!-- Chat scrollable -->
    <div class="flex-1 overflow-y-auto p-3">
      <div *ngFor="let msg of chatHistory">
        <div 
          class="p-3 mb-2 border rounded-md"
          [ngStyle]="{
            'background-color': msg.from === 'user' ? '#e0f2fe' : '#d1fadf'
          }"
          style="white-space: pre-line;"
        >
          <div class="font-semibold text-sm mb-1">
            {{ msg.from === 'user' ? 'TÃº' : 'Bot' }}
            <span class="float-right text-xs text-gray-600">{{ msg.timestamp }}</span>
          </div>
          <div>{{ msg.text }}</div>
        </div>
      </div>
    </div>

    <!-- Input + botones -->
    <div class="mt-3">
      <div class="flex gap-2">
        <input
          type="text"
          pInputText
          [(ngModel)]="message"
          placeholder="Escribe tu mensaje..."
          class="flex-1"
          (keydown.enter)="sendMessage()"
        />
        <button
          pButton
          icon="pi pi-send"
          (click)="sendMessage()"
          label="Enviar"
          [disabled]="!message.trim()"
        ></button>
      </div>

      <div class="text-right mt-2">
        <button
          pButton
          class="p-button-danger p-button-sm"
          icon="pi pi-trash"
          label="Borrar ConversaciÃ³n"
          (click)="clearChat()"
        ></button>
      </div>
    </div>

  </p-card>
</div>
